Communication APIs
==================

Description
-----------

This section contains investigation results on APIs for communication with other devices, other applications and servers.

Resources
---------

Primary contributor/editor for this API category: Samsung
Supporting contributors/reviewers: SEMC / ISMB / VisionMobile

APIs based on existing standards/implementations
------------------------------------------------

### Socket Communication

API’s mentioned in this section can be used by application developer to connect to application resources once the device discovered are presented and connected.

#### Phase 1

**Description:** To establish communication between two webinos devices.
**Requirement/architectural reference:** CAP-DEV-SEMC-006 webinos SHALL provide means for applications to execute streamed real-time interactive bi-directional communication with two or more other webinos applications running in the same device or running in different devices.
**Phase:** Webinos Phase 1
**Webinos responsible:**

  ----------------------------------------------------------------------- ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ----------------------------------------------------------------------------------------------------------------- --------------------------------------------------------------------------------- ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------------------------------------------------------------------------
  **Candidate API**                                                       **Short Description**                                                                                                                                                                                                                                       **Implementation Status**                                                                                         **Gaps**                                                                          **Notes**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         **Decision**
  "W3C HTML5 WebSockets":http://dev.w3.org/html5/websockets/            WebSocket provides: Bi-directional communication between client and server side process, multiplex various WebSockets together in one socket, and no problem with network protected by firewall as access is done on port 80/443.                           "Supported in Chrome and Safari. Partly supported in Firefox and Opera":http://caniuse.com/#search=websocket   No raw communication mechanism supported which leads to a requirement of proxy.   It has problem with "update command":http://www.adambarth.com/experimental/websocket.pdf in transparent proxies which can result in changing the contents of cache. It has been revoked in "Firefox":http://hacks.mozilla.org/2010/12/websockets-disabled-in-firefox-4/ and Opera. It is relevant but only WebSockets is not suffice but a combination of various technologies suits better. "node.js":http://github.com/LearnBoost/Socket.IO-node, hides detail about underneath communication mechanism   It is already supported in modern browser and there is no need of Webinos specific implementation
  "W3C HTML5 Server-Sent Events":http://dev.w3.org/html5/eventsource/   Server sent is designed to send messages from server and to support this it uses a push technology, it introduces DOM object event on which events are sent directly. It supports automatic reconnection. It is used as an alternative to XMLHttpRequest.   "It is implemented in all major browsers":http://caniuse.com/#search=server-sent                               It is only relevant for receiving updates from Server.                            Main difference with WebSockets, it does not support bi-directional communication and use plain HTTP messages which does not require changes on server side, as required for WebSockets . Plus it does not have requirement of allowing devices to be connected whole time with WebServer. Both serve different purpose, for continuous client and server communication use WebSockets, for receiving server updates using push technology use Server-Sent events.                                                It is already supported in modern browser and no specific webinos implementation is required
  ----------------------------------------------------------------------- ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ----------------------------------------------------------------------------------------------------------------- --------------------------------------------------------------------------------- ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------------------------------------------------------------------------

#### Phase 2

  --------------------------------------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ----------------------------------------------------------------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ----------------------------------------------------------------------------------
  "Web RTC": http://rtc-web.alvestrand.com/   Web RTC is still in a start-up phase and the goal is to define/select apiâ€™s, protocols and codecs that are required to enable real-time bi-directional communication in a web browser. Web RTC will enable the possibility to implement video/audio conference applications without installing plug-in components. The work with Web RTC will be divided between IETF and W3C/WHATWG. IETF will define/select the protocols and codecs whilst W3C/WHATWG will define the client APIâ€™s. The new client APIâ€™s will define the possibility to: 1. get user media from a camera or microphone (GetUserMedia API), 2. connect directly to a different peer (PeerConnection API) and 3. stream media and data between the peers (Stream API). As opposed to WebSockets, PeerConnection do not require that connections are relayed via a server. For example, two devices on the same IP sub network or with public ip addresses can connect directly to each other. To establish the connection the current working assumption is that ICE [RFC5245] will be used to negotiate and discover which addresses that can utilized to communicate directly between the peers. In some cases it is not possible to find a direct path between the peers depending on the network topology. In those cases a TURN server is used to relay the traffic between the peers. The working group has tried to agree upon a single session establishment protocol. SIP and XMPP have been proposed but it seems that the group will not agree upon one protocol. The current prediction is that the session protocol will be left out of the standard and initiatives will be started to create open source JavaScript implementations and let the market decide which implementation that will be used.   Experimental implementations exists: https://labs.ericsson.com/developer-community/blog/beyond-html5-peer-peer-conversational-video http://my.opera.com/core/blog/2011/03/23/webcam-orientation-preview   Web RTC does not replaces WebSockets. However, Web RTC is much better suited for exchanging data between peer with real-time characteristics.   Work in W3C started in "Web RTC WG":http://www.w3.org/2011/04/webrtc/. If the work is successful, implementations will most likely exists in all modern browsers before Webinos is ready.   It might be provided in browser and no work might be required in webinos project
  --------------------------------------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ----------------------------------------------------------------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ----------------------------------------------------------------------------------

A common approach is to use either WebSockets or Server-Sent events and if fails use XMLHttpRequest.

### Individual Components Communication

**Description:** To establish communication with server, which does not require continuous communication.
**Requirement/architectural reference:** ID-USR-Oxford-37 webinos SHALL provides methods to make applications addressable so that other applications can communicate with them.
**Phase:** Webinos Phase 1
**Webinos responsible:**

  -------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ -------------------------------------------------------------------------- ----------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------------------------------------------------------------------------
  **Candidate API**                                              **Short Description**                                                                                                                                                                                                                                              **Implementation Status**                                                  **Gaps**                                                                                                    **Notes**                                                                                                                                    **Decision**
  "W3C XMLHttpRequest":http://www.w3.org/TR/XMLHttpRequest2/   It allows performing HTTP client functionality directly from the script. It sends request directly to the WebServer without loading whole web page. Response are loaded without need to load the page, reply from server can be in XML, text, or in JSON format.   "Supported in all browsers":http://caniuse.com/#search=XMLHttpRequest   Cross origin website access were used to be blocked but addressed via "CORS":http://www.w3.org/TR/cors/   It is ideal where communication is required between client and server but does require communication continuously such as submitting form.   It is already supported in modern browser and there is no need of Webinos specific implementation
  -------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ -------------------------------------------------------------------------- ----------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------------------------------------------------------------------------

#### Messaging

**Description:** To send messages between application running on same device but with different instances.
**Requirement/architectural reference:** NM-DEV-FOKUS-001 It SHALL be possible to exchange information between multiple entities in terms of events.
DA-DEV-ISMB-003 Applications installed on a device SHALL be addressable, with multiple instances of the same application being separately addressable.
**Phase:** Webinos Phase 1
**Webinos responsible:**

  ---------------------------------------------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------ -------------------- ----------- ---------------------------------------------------------------------------------------------------
  **Candidate API**                                                                                                **Short Description**                                                                                                                                                                 **Implementation Status**                                                                                                      **Gaps**             **Notes**   **Decision**
  "W3C HTML5 Web Messaging":http://dev.w3.org/html5/postmsg/ (Referred as Channel Messaging in HTML5 Document)   Two independent code that want to communicate directly. It supports port to port communication. Ideal for intra communication between two instances that run in different contexts.   It is implemented in at least Chrome and Firefox as well in Android browser. For example test with http://www.html5test.com/   No caching support               It is already supported in modern browser and there is no need of Webinos specific implementation
  ---------------------------------------------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------ -------------------- ----------- ---------------------------------------------------------------------------------------------------

APIs for which no existing standards/implementations exist
----------------------------------------------------------

### Low level event handling API

**Description:** To send/receive/forward arbitrary data among any entity, in particular being suited for developing higher level APIs relying on data exchange featuring Webinos’ overlay networking and discovery
**Requirement/architectural reference:** All "NM requirements":http://dev.webinos.org/redmine/projects/wp2-2/wiki/Remote_Notifications_and_Messaging, "WP 3.1 event handling draft architecture":http://dev.webinos.org/redmine/projects/wp3-1/wiki/Event_handling_(subscriptionstoringforwarding)#Draft-architecture
**Phase:** 1
**Webinos responsible/editor:** Stefano D’Angelo/ISMB

|**High level Requirement**|**Notes**|
|Generating events||
|Sending/forwarding events||
|Registering/unregistering event listeners for incoming events||

