Distributed Hash Table
======================

Introduction
------------

DHT offers a good model for forming an overlay network and sharing information about peers and files shared by them. It works by hashing file and filename, and this information is then sent along nodes until it finds a node where information will be stored. It is based on three main concept storing file and filename in form of hash, then sending information along the nodes until it reaches it final destination. There are several implementations of DHT such as Kademlia, BitTorrent, Chord, Tapestry, etc.

Key highlights about DHT are:
# Decentralized, fault tolerance capable, and scalable
# Lookup service similar to hash table (key, value)
# Retrieve value based on key by any node, which could be local or remote node.
# Hash operation on file and file name and then send them to nearest node.

Use cases
---------

To upload a service supported by webinos device, it can be stored in a file and be given an appropriate name and its description is stored in a file. File name is generated by using SHA1 algorithm and then message is sent to any node participating in webinos. It is sent from node to node through overlay networks until it reaches node mentioned by keyspace partitioning (explained below).

Technical Details
-----------------

After files and filename are hashed and stored in a node as specified by keyspace partitioning. These files could then be retrieved by querying for files which are stored based on the key. Only exact match can be returned back. The implementations of DHT differs how files and filename are hashed and where they are stored.

Different layers contribute to different functionalities of DHT network. It comprises of:
# Network layer: handles local and remote device network connection
# Overlay network: routing and location lookup for resources discovery.
# Feature management layer: security management, resource management and reliability and fault resiliency.
# Service specific layers provides services management/messaging/scheduling, Meta-data describes about location information and p2p peers.
# Application layer include applications, tool and services.

Different components are involved in form part of DHT:
# Abstract keyspace: Hash the file name which will be the key. It uses 128 to 160 bit key space. In real world it is not file name that is hashed but file itself, to make its content available.
# Keyspace monitoring: Splits keyspace among participating nodes.
# Keyspace portioning: The node that stores key and data and is responsible for node asking about it. It uses consistent hashing mechanism to map keys to nodes, with each node being assigned a single key called identifier (ID). Node owns all keys for its closed ID. Addition and deletion of node are updated to only adjacent nodes. Local preserving hashing insures same key is assigned to similar objects.
# Overlay network connect the nodes, allows finding owner of any given key in the keyspace.

Node holds both key and data. Any client can then retrieve by hashing the same filename and ask any DHT node to find the data associated with k with a message get(k). It will get traversed on overlay network until it reaches the node holding data. Each node holding has node ID that holds K or at least have node ID of node nearer to it. Route then used is greedy algorithm to find or query the node nearest. If no more nodes left then we have arrived at the node.

Makes thing independent and things are easily available to other nodes. Guarantee the lowest number of hops is quite important. Some do iterative lookup before putting data and message is sent directly to that node.

Comparison analysis
-------------------

|Technologies|Implementations|Integrate with browser|Network structure - central point required?| More comparing criteriaâ€¦|
|DHT| Kademlia |No| P2P||

Gap Analysis
------------

|Requirement | Gaps Identified | Proposal Solutions|
|ID-USR-Oxford-20| DHT provides hashing mechanism for key id which in webinos system could be the device id. And content of device capabilities that are located remotely can be represented in form of services. |
It will require another hash mapping between user and device id. |
|ID-USR-Oxford-24 | Each device id will be represented as the key, it will allow webinos system to be identified to webinos system. | Using key, webinos system can identify services offered by particular device.|
|ID-USR-Oxford-28 | Device id information could be shared with remote servers, cloud and with peers connected.||
|ID-USR-POLITO-011 | Device id information has to shared among nodes to make it discoverable, it will make node unreachable in DHT. |Webinos system can try to hide information but then it should have a way to inform all personal devices about different node ids|
|PS-USR-Oxford-108| Remote nodes can be accessed in DHT but only shared files can be accessed. Remote device only have access to these files | TO make sure the content that user wants to be available is shared and searchable remotely|
|PS-USR-Oxford-73 | This is not supported in DHT|Webinos can only certain nodes to update policy of the device. It could be only the device owned by the user that can update policy.|
|LC-USR-ISMB-037/PS-USR-Oxford-122 | This is not supported in DHT | To install application it should transfer the file to node requiring it and allow it to get executed.|
|CAP-DEV-FHG-100| It currently designed for file exchange between peers | Resources available on remote device if represented in form of XML or JSON, it can be accessed by remote device. |

Conclusion
----------

DHT is relevant to webinos and could be used for remote discovery. The main issues to find relevant key we should use a layer on top to do searching of all remote nodes with appropriate search query. If no adjacent clients are there how it communicates with remote nodes is not clear. (A bit of experimentation will help on this, I am working on this and will try updating sample soon)

Other issue is restrictive usage to allow only certain devices that match user device should be accessible.

In webinos context, DHT could be used to find peers which provides information of services available. Key is handling of namespace that will be restrictive for each user.

